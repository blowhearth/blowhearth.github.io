(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,n){e.exports=n(481)},216:function(e,t,n){},217:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},218:function(e,t,n){},238:function(e,t){},239:function(e,t){},450:function(e,t){},452:function(e,t){},481:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(209),u=n.n(c),o=(n(216),n(26)),s=n(27),i=n(29),l=n(28),p=n(30),d=(n(217),n(218),n(7)),h=n.n(d),f=n(20),v=n(114),m=n(479),b=new v.Server("https://horizon-testnet.stellar.org");var y={build:function(e){var t=v.Keypair.fromSecret(e),n=t.publicKey();function a(e){return r.apply(this,arguments)}function r(){return(r=Object(f.a)(h.a.mark(function e(n){var a,r,c,u,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Adding new data to the database,",n),e.prev=1,e.next=4,b.accounts().accountId(t.publicKey()).call();case 4:return a=e.sent,r=a.sequence,c=new v.Account(t.publicKey(),r),(u=new v.TransactionBuilder(c,{fee:v.BASE_FEE}).addOperation(v.Operation.manageData(n)).setTimeout(1e3).build()).sign(v.Keypair.fromSecret(t.secret())),e.next=11,b.submitTransaction(u);case 11:return o=e.sent,console.log(o),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function c(){return(c=Object(f.a)(h.a.mark(function e(t,n){var r,c,u,s;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:return r=e.sent,c=r.value,u={name:t,value:JSON.stringify({index:c.index+1,coordinates:n})},e.next=8,a(u);case 8:return s=e.sent,e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(0),console.debug(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)}function u(){return(u=Object(f.a)(h.a.mark(function e(t,n,r){var c,u;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={name:n,value:JSON.stringify({index:t,coordinates:r})},e.next=4,a(c);case 4:return u=e.sent,e.abrupt("return",u);case 8:e.prev=8,e.t0=e.catch(0),console.debug(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function o(){return s.apply(this,arguments)}function s(){return(s=Object(f.a)(h.a.mark(function e(){var n,a,r,c,u,o,s,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.loadAccount(t.publicKey());case 2:for(n=e.sent,a=n.data_attr,r=[],c=0,u=Object.keys(a);c<u.length;c++){o=u[c];try{s=JSON.parse(m(a[o])),i={name:o,value:s},r.push(i)}catch(l){console.debug(l)}}return e.abrupt("return",r.sort(function(e,t){return e.value.index-t.value.index}).pop());case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function i(){return(i=Object(f.a)(h.a.mark(function e(t){var n,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={name:t,value:null},e.next=4,a(n);case 4:return r=e.sent,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.debug(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function l(){return(l=Object(f.a)(h.a.mark(function e(){var n,a,r,c,u,o,s,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.loadAccount(t.publicKey());case 3:for(n=e.sent,a=n.data_attr,r=[],c=0,u=Object.keys(a);c<u.length;c++){o=u[c];try{s=JSON.parse(m(a[o])),i={name:o,value:s},r.push(i)}catch(l){console.debug(l)}}return e.abrupt("return",r.sort(function(e,t){return e.value.index-t.value.index}));case 10:return e.prev=10,e.t0=e.catch(0),console.debug(e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}return v.Network.useTestNetwork(),{persistBearer:function(e,t){return c.apply(this,arguments)},getlastDataEntry:o,publicKey:n,getAllData:function(){return l.apply(this,arguments)},persistTxBearer:function(e,t,n){return u.apply(this,arguments)},deleteDataEntry:function(e){return i.apply(this,arguments)}}}},g=n(210),x=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={data:[],fields:{index:"",txid:"",coordinates:""}},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"saveField",value:function(e,t){var n=this.state.fields;this.setState({fields:Object.assign({},n,Object(g.a)({},e,t))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=void 0===n?[]:n,c=t.addTX,u=this.state.fields;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," TXID"),r.a.createElement("th",null," Coordinates"),r.a.createElement("th",null," Index"))),r.a.createElement("tbody",null,0===a.length&&r.a.createElement("tr",{style:{fontSize:15}},r.a.createElement("td",null),r.a.createElement("td",null,"No elements found"),r.a.createElement("td",null)),a.map(function(e,t){return r.a.createElement("tr",{className:"dataRow",key:t},r.a.createElement("td",null," ",r.a.createElement("a",{className:"coolLink",href:"https://stellar.expert/explorer/public/tx/"+e.name,target:"blank"},e.name," ")),r.a.createElement("td",null,JSON.stringify(e.value.coordinates)),r.a.createElement("td",null,e.value.index))}),r.a.createElement("tr",{className:"dataRow"},r.a.createElement("td",null,r.a.createElement("input",{className:"coolInput",type:"text",placeholder:"TXID",onChange:function(t){return e.saveField("txid",t.target.value)}})),r.a.createElement("td",null,r.a.createElement("input",{className:"coolInput",type:"text",placeholder:"coordinates",onChange:function(t){return e.saveField("coordinates",t.target.value)}})),r.a.createElement("td",null,r.a.createElement("input",{className:"coolInput",type:"text",placeholder:"index",onChange:function(t){return e.saveField("index",t.target.value)}}))))),r.a.createElement("button",{className:"coolButton",onClick:function(){return c(u)}},"ADD"))}}]),t}(r.a.Component);var E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={data:[],loading:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this.props.privateKey;this.DM=y.build(e),this.setData()}},{key:"setData",value:function(){var e=Object(f.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.privateKey,e.next=3,this.DM.getAllData();case 3:return t=e.sent,e.abrupt("return",this.setState({data:t}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addTX",value:function(){var e=Object(f.a)(h.a.mark(function e(t){var n,a,r,c,u=this;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.txid,a=t.index,r=t.coordinates,console.log("Adding tx",n,r),this.setState({loading:!0}),""!==a||""!==r){e.next=9;break}return e.next=6,this.DM.deleteDataEntry(n);case 6:e.sent,e.next=13;break;case 9:return e.next=11,this.DM.persistTxBearer(a,n,JSON.parse(r));case 11:c=e.sent,console.log(c);case 13:this.setData().then(function(){return u.setState({loading:!1})});case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=void 0!==n&&n,c=t.loading;return a?r.a.createElement("div",null,r.a.createElement(x,{data:a,addTX:function(t){return e.addTX(t)}}),c&&r.a.createElement("div",null,"Procesing transaction")):r.a.createElement("div",null,"Connecting to the Stellar Network")}}]),t}(r.a.Component),O=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.setPK,n=this.state.pk,a=void 0===n?null:n;return r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:function(t){return e.setState({pk:t.target.value})}}),r.a.createElement("button",{onClick:function(){return t(a)}}," login "))}}]),t}(r.a.Component),k=n(114),w=n.n(k).a.StrKey,j=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"setPrivateKey",value:function(e){if(console.log("Checking PK"),w.isValidEd25519SecretSeed(e))return console.log("Check Pass"),this.setState({privateKey:e});console.log("WrongPK")}},{key:"render",value:function(){var e=this.state.privateKey,t=void 0===e?null:e;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},t?r.a.createElement(E,{privateKey:t}):r.a.createElement(O,{setPK:this.setPrivateKey.bind(this)})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[211,1,2]]]);
//# sourceMappingURL=main.0c177ed8.chunk.js.map